#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# HEALTHFLOW - Pre-push Hook
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

echo "ğŸš€ Running pre-push checks..."

# Get the current branch
BRANCH=$(git rev-parse --abbrev-ref HEAD)

# Protect main/master branches from direct pushes
if [ "$BRANCH" = "main" ] || [ "$BRANCH" = "master" ]; then
  echo "âŒ Direct pushes to $BRANCH are not allowed!"
  echo "Please create a feature branch and submit a pull request."
  exit 1
fi

# Run tests before pushing
echo "ğŸ§ª Running tests..."
npm run test --if-present

# Run build to ensure everything compiles
echo "ğŸ”¨ Running build check..."
npm run build --if-present

echo "âœ… Pre-push checks passed!"
